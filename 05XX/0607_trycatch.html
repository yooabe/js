<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        /*
        同步：阻塞，当前程序运行，必须等前一个程序运行完毕以后才能运行
        异步：非阻塞
         */

        window.onload = function () {
            var oBtn = document.getElementById("btn1");
            oBtn.onclick = function () {
                //创建ajax对象
                /* 
                IE8以下声明ajax方法
                    ActiveXObject("Microsoft.XMLHTTP");
                 */
                var xhr = null;
                try {
                    xhr = new XMLHttpRequest();
                } catch (error) {
                    xhr = new ActiveXObject("Microsoft.XMLHTTP");
                }

                //调用open
                /* 
                    1.请求方式 get post
                    2.url
                    3.是否异步
                 */
                xhr.open("get", "./file/1.txt", true);

                //调用send
                xhr.send();

                //等待数据响应
                /* 
                onreadystatechange 事件类型
                readyState 发生变化时候调用
                    0 调用open方法之前
                    1 调用send方法之后，发送请求
                    2 send方法完成，已经接收到所有的相应内容
                    3 正在解析下载到的数据
                    4 解析完成
                 */
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4) {
                        //判断状态码
                        if (xhr.status == 200) {
                            alert(xhr.responseText);
                        } else {
                            alert("error:" + xhr.status)
                        }
                    }
                }
            }
        }


        /*
        try{
            尝试执行的代码
            尝试执行的代码
        }catch(error){
            补救的代码
        }
        [注] 更多的用在代码调试和后期维护


        try{
            尝试执行的代码
            尝试执行的代码
            throw new Error("异常信息代码")
        }catch(error){
            补救的代码
        }
         */
    </script>
</head>

<body>
    <button id="btn1">???</button>
</body>

</html>